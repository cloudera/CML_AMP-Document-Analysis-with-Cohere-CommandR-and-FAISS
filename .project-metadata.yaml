name: Document Analysis with Cohere CommandR and FAISS
description: |
  Leverage Cohere's Command R model for PDF document analysis and knowledge base creation with FAISS vector store.

author: Cloudera Inc.
specification_version: 1.0
prototype_version: 1.0
date: "2024-07-24"

environment_variables:
  COHERE_API_KEY:
    description: "Enter your Cohere API Key here. (Shown in API Keys page on Cohere website)"
    required: true

runtimes:
  - editor: JupyterLab
    kernel: Python 3.11
    edition: Standard

tasks:
  - type: create_job
    name: Create Job to Install Dependencies
    entity_label: install_dependencies
    script: 0_session-install-requirements/install_requirements.py
    short_summary: Install Requirements and Dependencies
    kernel: python3
    cpu: 2
    memory: 8
    environment:
      TASK_TYPE: CREATE/RUN_JOB

  - type: run_job
    entity_label: install_dependencies
    short_summary: Run Job to Install Dependencies

  - type: create_job
    name: Populate FAISS db with documents embeddings
    entity_label: faiss_insert
    script: 1_job-load-to-faiss/upload_files.py
    arguments: None
    short_summary: Create job to populate FAISS with document embeddings.
    long_summary: Create job to insert embeddings for documents into FAISS db. Embeddings are generated by the locally running Cohere embeddings model.
    cpu: 2
    memory: 8
    environment:
      TASK_TYPE: CREATE/RUN_JOB

  - type: run_job
    entity_label: faiss_insert
    short_summary: Populate FAISS db with documents embeddings

  - type: start_application
    name: Launch Chatbot Application
    subdomain: cohere-app
    script: 2_app/launch-app.py
    short_summary: Create and start Cohere chatbot application
    long_summary: Create and start Cohere chatbot application. Remember to enable unauthenticated app access for external access to the UI.
    cpu: 2
    memory: 8
    environment_variables:
      TASK_TYPE: START_APPLICATION
